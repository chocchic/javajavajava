# Node_MySQL 연동  
## 1. 기본 요청이 왔을 때 html 출력  
### 1) index.js파일에 기본 요청을 처리하는 라우팅 코드를 출력  
  ```javascript  
  //기본 요청이 왔을 때 수행할 내용
    app.get('/', (req, res, next) => {
        res.sendFile(path.join(__dirname,'index.html'))
    })
  ```  

### 2) public 디렉토리에 index.html파일을 생성해서 작성  
  ```html
  <!DOCTYPE html>
  <html>
      <head>
          <meta charset="utf-8"/>
          <title>Node_MySQL</title>
      </head>
      <body>
          <h1>MySQL</h1>
      </body>
  </html>
  ```  

### 3) 서버를 구동하고 localhost:포트번호를 입력하고 index.html파일이 출력되는지 확인  

### 4) 프로젝트의 log 디렉토리의 오늘 날짜 로그파일이 생성되고 로그가 기록되는지 확인  

  * 동기(Sync, 프로세스, 절차적)와 비동기(Async, 스레드, 비절차적-객체지향, 콜백)  
    동기적 처리는 위에서부터 아래로 순차적으로 실행

    비동기적처리는 작업 수행도중 쉬는 시간이 발생하거나 cpu를 사용하지 않ㄴ아도 되는 작업이 발생하면 다른 작업을 수행할 수 있도록 제어권을 넘길 수 있는 처리  
    상속 Inhertance - 상속받아서 작업(SubClassing)  
    async : 비동기적 처리  
    await : async가 끝나고나면 해주세요  

  * 객체 지향
    ```java
      class Temp{
        // private int a;
        public int getA(){
          return a;
        }
        private int a; // 실질적으로 a가 만들어지는 것은 Temp의 생성자이므로 어디에서 선언하든 상관 없음
        // 생성자는 allocation과 init을 하기 때문
      }
    ```
  * Hoising : 이름을 만들기 전에 사용할 수 있도록 하는 것  
    javascript에서는 var가 hoisting가능, let으로 만들면 hosting이 안됨  
    ```javascript
    function getA(){
      return a; // 에러
    }
    console.log(getA());
    let a;
    ```  


### 뺴먹음
  ```javascript
  // 전체 데이터 가져오기 요청을 처리하는 라우팅 함수
  app.get('/item/all', (req,res, next)=>{
      // 전체 데이터와 전체 데이터 개수를 가져와서 출력
      var list = [] // 조회한 데이터 저장할 배열
      var count = 0; // 조회한 데이터 개수를 저장할 변수

      // 전체 데이터 가져오는 query
      connection.query('select * from goods order by itemid desc', (err, results,fields)=>{
          //에러가 발생했을 때
          if(err){
              throw err;
          }
          list = results;
          //데이터 개수 가져오기
          connection.query('select count(*) cnt from goods', (err, results, fields)=>{
              //에러가 발생했을 때
              if(err){
                  throw err;
              }

              //읽어온 데이터 개수를 count에 저장
              count = results[0].cnt;
              //json출력
              res.json({'count': count, 'list':list})
          })
      })
  })
  ```  

### 2) 웹 브라우저에서 localhost:포트번호/item/all을 입력하고 데이터가 출력되는지 확인  
  * 구조는 count키에 데이터 개수가 저장되어 있고 list키에 item 배열이 저장되어 있습니다.

### 3) index.html 파일에 요청 메뉴와 출력영역을 작성
  ```html
   <!-- 메뉴 -->
        <a href="#" id="allbtn">전체데이터 가져오기</a>
        <!-- 데이터 출력 영역-->
        <div id="content"></div>
        <!-- 데이터 삽입과 수정시 폼을 출력할 영역-->
        <div id="updatearea"></div>
  ```

  * head에 script 작성시 유의할 점  
    HTML, CSS, JavaScript를 가지고 HTML파일을 생성해서 출력하는데, HTML 태그와 JavaScript코드는 작성한 순서대로 동작. CSS는 HTMl 태그 부분을 전부 랜더링하고 수행.  

    ```html
      <html>
        <head>
            <style>
              #content{color:red;}
            </style>
            <script>
              document.getElementById('content').innerHTML ="HI"; // HI로 바뀌지 않음
              window.addEventListener('load', (e)=>{
                document.getElementByID('content').innerHTML = "HI"; // 바뀜
              }) 
            </script>
        </head>
        <body>
            <div id="content">Hello</div>
        </body>
        <script>
          document.getElementByID('content').innerHTML = "HI"; // 아래에 작성했으므로 window~이 과정을 수행할 필요가 없음. html 태그가 다 로딩되고 수행되기 떄문
        </script>
      </html>
    ```